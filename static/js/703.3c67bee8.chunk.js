"use strict";(self.webpackChunkmodular_engine_app=self.webpackChunkmodular_engine_app||[]).push([[703],{4703:function(e,r,n){n.r(r),n.d(r,{initEngine:function(){return f}});var t=n(7644),i=n(8277),u=n(827),c=n(9038),o=function(){return o=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},o.apply(this,arguments)},f=function(e){var r=function(e){var r=e?o({},e):{},n=r.redux||{},t=n.customize||{};return o(o({},e),{redux:{customize:o(o({},t),{config:t.config||{}}),reducers:n.reducers||{},preload:n.preload||{},middlewares:n.middlewares||[],reduxMiddlewares:n.reduxMiddlewares||[]},plugins:r.plugins||[]})}(e),n=function(e){var r=o({},e),n={},u=[],c=[],f=[],a=[],d=[],s=[],l=["redux"],p=function(e){return function(r){var n=r.config,t=r.store;return e({config:n,store:t})||n}};r.plugins.forEach((function(t){try{var i=t();if(i.create){var o=i.create(e)||{field:null,content:{}};o.field&&"config"!==o.field&&(r[o.field]=o.content,l.push(o.field))}i.redux&&c.push(i.redux),i.format&&u.push(i.format),i.before&&a.push(p(i.before)),i.after&&f.push(p(i.after)),i.feature&&(n[i.feature]=!0),i.preInit&&d.push(i.preInit),i.postInit&&s.push(i.postInit)}catch(t){}}));var g=function(e,r){var n=o({},r);return l.forEach((function(r){n[r]||(n[r]=e[r])})),n};return u.forEach((function(e){r=g(r,e(r,n))})),{before:function(e){var u=o({},e);return a.forEach((function(e){u=g(u,e({config:u}))})),c.forEach((function(e){var n=e(u);if(n.slice&&"config"!==n.slice){r.redux.customize[n.slice]=(0,i.e)({toFill:r.redux.customize[n.slice],defaultObj:{state:{},effects:{}}});var c=n.initialState||{},f=r.redux.preload[n.slice]||{};r.redux.preload[n.slice]=o(o(o({},c),f),u.redux.customize[n.slice].state);var a=u.redux.customize[n.slice].effects;n.effects&&(a=o(o({},a),n.effects)),u.redux.reducers[n.slice]=(0,t.gv)({initialState:r.redux.preload[n.slice],effects:a,additionalReducer:n.reducer})}})),d.forEach((function(e){e(u,n)})),u},after:function(e,r){s.forEach((function(t){t(e,r,n)}));var t=o({},e);return f.forEach((function(e){t=g(t,e({config:t,store:r}))})),t},config:r,enabledPlugins:n}}(r);r=n.config;var f=function(e){var r=e.redux,n=r.reduxMiddlewares;r.middlewares.forEach((function(e){n.push((function(r){return function(n){return function(t){return e(t,r),n(t)}}}))}));var i=(r.customize||{config:{}}).config||{},f=o({config:o({appName:e.appName||""},i)},e.redux.preload),a=o({config:function(e){return void 0===e&&(e=f.config),e}},e.redux.reducers),d=(0,u.xC)({reducer:(0,c.UY)(a),preloadedState:f,middleware:n,devTools:!1});return d.dispatch((0,t.k$)(f.config)),d}(r=n.before(r));return r=n.after(r,f),{store:f,config:o(o({},r),{enabledPlugins:n.enabledPlugins})}}}}]);